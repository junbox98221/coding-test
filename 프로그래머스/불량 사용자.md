# [불량 사용자](https://school.programmers.co.kr/learn/courses/30/lessons/64064)

주어진 불량 사용자 id에 대해서 가능한 모든 응모자 조합의 수를 구하는 문제다.

불량 사용자 id별로 가능한 응모자 id를 구한 뒤, dfs로 조합을 구한다.

```JavaScript
function solution(user_ids, banned_ids) {
  const matches = banned_ids.map((banned) => {
    return user_ids.filter((user) => isMatch(user, banned));
  });

  const resultSet = new Set();

  function dfs(depth, path) { // depth: 현재 탐색 중인 banned_ids의 인덱스, path: 현재까지 선택된 user_ids
    if (depth === banned_ids.length) {
      const sorted = [...path].sort().join(",");
      resultSet.add(sorted);
      return;
    }

    for (const user of matches[depth]) {
      if (!path.has(user)) {
        path.add(user);
        dfs(depth + 1, path);
        path.delete(user);
      }
    }
  }

  dfs(0, new Set());

  return resultSet.size; // 중복 제거된 조합의 수 반환
}

function isMatch(user, banned) { // user가 banned에 매칭되는지 검사
  if (user.length !== banned.length) return false;

  for (let i = 0; i < user.length; i++) {
    if (banned[i] === "*") continue;
    if (user[i] !== banned[i]) return false;
  }

  return true;
}
```
